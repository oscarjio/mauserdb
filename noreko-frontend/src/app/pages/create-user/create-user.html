<div class="container-fluid mt-4">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">
          <i class="fas fa-user-plus me-2"></i>
          Skapa ny användare
        </h1>
        <a routerLink="/admin/users" class="btn btn-secondary">
          <i class="fas fa-arrow-left me-2"></i>
          Tillbaka
        </a>
      </div>

      <!-- Success Toast -->
      <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1050;">
        <div class="toast show" *ngIf="successMessage" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header bg-success text-white">
            <i class="fas fa-check-circle me-2"></i>
            <strong class="me-auto">Framgång</strong>
            <button type="button" class="btn-close btn-close-white" (click)="successMessage = ''"></button>
          </div>
          <div class="toast-body bg-dark text-white">
            {{ successMessage }}
          </div>
        </div>
      </div>

      <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
        <i class="fas fa-exclamation-triangle me-2"></i>
        {{ errorMessage }}
      </div>

      <!-- Create User Card -->
      <div class="card mb-4">
        <div class="card-header bg-success text-white">
          <h5 class="card-title mb-0">
            <i class="fas fa-user-plus me-2"></i>
            Ny användare
          </h5>
        </div>
        <div class="card-body">
          <form (ngSubmit)="onSubmit()" #createUserForm="ngForm">
            <div class="mb-3">
              <label for="username" class="form-label">
                <i class="fas fa-user me-2"></i>
                Användarnamn *
              </label>
              <input 
                id="username" 
                name="username" 
                class="form-control" 
                required 
                [(ngModel)]="user.username"
                [disabled]="isLoading"
                placeholder="Ange användarnamn"
              />
            </div>

            <div class="mb-3">
              <label for="password" class="form-label">
                <i class="fas fa-lock me-2"></i>
                Lösenord *
              </label>
              <input 
                id="password" 
                name="password" 
                type="password" 
                class="form-control" 
                required 
                [(ngModel)]="user.password"
                [disabled]="isLoading"
                placeholder="Ange lösenord"
              />
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">
                <i class="fas fa-envelope me-2"></i>
                E-post *
              </label>
              <input 
                id="email" 
                name="email" 
                type="email" 
                class="form-control" 
                required 
                [(ngModel)]="user.email"
                [disabled]="isLoading"
                placeholder="Ange e-postadress"
              />
            </div>

            <div class="mb-3">
              <label for="phone" class="form-label">
                <i class="fas fa-phone me-2"></i>
                Telefon
              </label>
              <input 
                id="phone" 
                name="phone" 
                type="tel" 
                class="form-control" 
                [(ngModel)]="user.phone"
                [disabled]="isLoading"
                placeholder="Ange telefonnummer (valfritt)"
              />
            </div>

            <div class="d-flex justify-content-end gap-2 mt-4">
              <a routerLink="/admin/users" class="btn btn-secondary" [class.disabled]="isLoading">
                <i class="fas fa-times me-2"></i>
                Avbryt
              </a>
              <button 
                class="btn btn-success" 
                type="submit" 
                [disabled]="isLoading || !createUserForm.form.valid"
              >
                <i class="fas" [class.fa-spinner]="isLoading" [class.fa-user-plus]="!isLoading" [class.fa-spin]="isLoading" [class.me-2]="true"></i>
                <span *ngIf="!isLoading">Skapa användare</span>
                <span *ngIf="isLoading">Skapar...</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

